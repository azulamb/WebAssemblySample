<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>Hello, World!(WASI)</title>
<script>

document.addEventListener( 'DOMContentLoaded', () => {
	const result = document.getElementById( 'result' );

	const importObject = {
		wasi_unstable: {
			fd_write: ( a, b, c, d, e ) => {
				console.log( a, b, c, d, e );
				return 0;
			},
		},
	};
	// TypeError: WebAssembly.instantiate(): Import #0 module="wasi_unstable" error: module is not an object or function
	//WebAssembly.instantiateStreaming( fetch( './hello.wasm' ), {} ).then( ( wasm ) => {
	WebAssembly.instantiateStreaming( fetch( './hello.wasm' ), importObject ).then( ( wasm ) => {
		console.log( wasm );
		wasm.instance.exports._start();
	} ).catch( ( error ) => { console.log( error ); } );
} );
</script>
<style>
</style>
</head>
<body>
	<div>
		<input id="result" readonly />
	</div>
</body>
</html>
